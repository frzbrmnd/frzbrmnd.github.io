<!DOCTYPE>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Maptalks Quick Start</title>
    <!-- or link to your downloaded files -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/maptalks/dist/maptalks.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/maptalks/dist/maptalks.min.js"></script>
</head>
<body>
<div style="width:800px;height:600px;" id="map"></div>
<script type="text/javascript">

    let user_loc = new maptalks.VectorLayer("test2");
    

  // create map in div 'map'
  let map = new maptalks.Map('map', {
    center: [51.67, 32.625],
    zoom: 15,
    //bearing: 30,
    zoomControl: true,
    scaleControl: true,
    baseLayer: new maptalks.TileLayer('base', {
      'urlTemplate' : 'http://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}',
       
    }),
    layers: [user_loc],
  });
    map.setPitch(45);
  

  let current_coords;
  let marker = new maptalks.Marker([51.67, 32.625,500], {
    'id' : 'marker0',
    'symbol' : {
        'markerFile'  : './man.png',
        'markerWidth' : 100,
        'markerHeight': 150,
    },
    'properties' : {
        'foo' : 'value'
    }
});
    marker.addTo(user_loc);

    if (navigator.geolocation) {
        console.log("available")
        navigator.geolocation.watchPosition(showPosition);
    
    }else{
        alert("turn on your location");
    }

    function showPosition(position){
        console.log("current loc is: ");
        marker.setCoordinates([position.coords.longitude, position.coords.latitude]);
   
        



       
    }

</script>
</body>
</html>
